base_dir: .
work_dir: ${base_dir}/output_test

hydra:
  output_subdir: null
  run:
    dir: ${base_dir}

contig_map: "A1-5,A18-114,7-7,A122-150,14-14,A165-221,A233-328,B1-5,B286-292,8-8,B301-308,C1-5,D1-5,D29-35,5-5,D41-95,9-9,D105-110"

diffusion:
  input_dir: ${base_dir}/input_test
  output_dir: ${work_dir}/0_diffusion
  command: "pixi run run-inference"
  num_designs: 11

  inference:
    model_runner: NRBStyleSelfCond
    ligand: "LIG"
    num_designs: ${diffusion.num_designs}
    ckpt_path: /data/jpc/code/rf_diffusion_all_atom/RFDiffusionAA_paper_weights.pt

  model:
    freeze_track_motif: true

  potentials:
    guiding_potential: "type:ligand_ncontacts,weight:1"
    guide_scale: 2
    guide_decay: cubic

  diffuser:
    T: 20


## We're doing design with 3 temperatures, and 5 sequences each.
## This usually gives decent success with designable backbones.
## For more complicated cases consider doing >100 sequences.
ligand_mpnn:
  output_dir: ${work_dir}/1_ligandmpnn
  make_maskdict_command: "pixi run -e ligand ${base_dir}/scripts/make_maskdict_from_trb.py"
  command: "pixi run run-ligand"
  mpnn_temperatures: [0.1, 0.2, 0.3]
  mpnn_outputs_per_temperature: 5
  mpnn_omit_AAs: "C"
  model_params_file: /data/jpc/code/LigandMPNN/model_params/ligandmpnn_v_32_010_25.pt


boltz:
    input_dir_pattern: ${ligand_mpnn.output_dir}/*/seqs
    output_dir: ${work_dir}/2_boltz
    command: "pixi run boltz predict"
    yaml_files_dir: ${boltz.output_dir}/input
    file_pattern: nyl12*.fa
    base_chain: "MAASSTDNILHFDFPEVQIGTAINPEGPTGITLFYFPKGVQASVDIQGGSVGTFFTQEKMQQGEAYLDGVAFTGGGILGLEAVAGAVSSLFADQTKNEVQFRRMPLISGAVIFDYTPRQNMIYPDKALGQKAFAALSAGQFVQGRHGAGVSASVGKLLRDGFQLAGQGGAFAQIGKTKIAVFTVVNAVGVILDEKGEVIYGLPKGATKQTLNQQVTELLQQPKKPFWPEPKNTTLTIVITNEKLAPRHLKQLGRQVHHALSQVIHPYATILDGDVLYTVSTRSIESDLYAPGADIESDLNAKFIYLGMVAGELAKQAVWSAVGYSHRP"
    partial_chain_start: "MAASS"
    betachain_start: "TTLTIVIT"
    cif_file: "/data/jpc/code/heme_binder_diffusion/cif/Nyl12_refine13_no_tail.cif"
    boltz_input_template: "templates/boltz.yaml.j2"
    molecule_smiles: "CC(=O)NCCCCCC(=O)NCCCCCC(=O)NCCCCCC(=O)NCCCCCC(=O)NCCCCCC(=O)[O-]"
    batch_processing: true
    boltz_params:
      model: boltz2
      output_format: pdb
      use_msa_server: false
      msa: /data/jpc/code/msas_try1/nyl12.a3m
      msa_pairing_strategy: greedy
      use_potentials: true
      cache: /data/jpc/code/boltz
      output_dir: ${boltz.output_dir}
